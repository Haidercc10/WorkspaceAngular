<app-menuLateral></app-menuLateral>
<br>
<app-VistasFavoritas></app-VistasFavoritas>

<div class="d-flex justify-content-center overlay" *ngIf="cargando">
    <div style="margin: auto;">
      <p-progressSpinner></p-progressSpinner>
    </div>
</div>

<div class="contain">
  <div class="container-fluid">
    <!-- Titulo principal -->
    <div class="mb-4 Titulo">
      <h2 [ngClass]="{'tituloRojo' : !modoSeleccionado, 'tituloClaro': modoSeleccionado }">Control de Calidad</h2>
    </div>

    <!-- Linea principal -->
    <div class="mb-4">
      <hr class="colorLinea">
    </div>
  </div>
</div>

<p-card class="mb-5">
    <div class="d-grid gap-2 d-md-flex justify-content-md-end" >
      <p-button icon="pi pi-info" styleClass="p-button-rounded p-button-warning" [style]="{width: '25px', height: '25px'}" (click)="tutorial()" pTooltip="Ver Tutorial" tooltipPosition="top"></p-button>
    </div>

    <div class="mb-4">
      <h3 [ngClass]="{'tituloRojo': !modoSeleccionado, 'tituloClaro': modoSeleccionado}"><i class="pi pi-search"></i> Buscar Orden de Trabajo</h3>
    </div>

    <div class="container-fluid" id="card">
      <p-tabView [scrollable]="true">
        <p-tabPanel
          header="Extrusión"
          leftIcon="pi pi-bolt"
          tooltip="Control de Extrusión">
          <div class="mb-4">
            <h3 [ngClass]="{'tituloRojo': !modoSeleccionado, 'tituloClaro': modoSeleccionado}"><i class="pi pi-search"></i> Buscar Orden de Trabajo</h3>
          </div>

          <!--  -->
          <p-table
            #dt_Extrusion
            dataKey="ot"
            [value]="datosControlCal_Extrusion"
            [resizableColumns]="true"
            columnResizeMode="expand"
            styleClass="p-datatable-gridlines p-datatable-sm"
            responsiveLayout="scroll"
            [rowHover]="true"
            [scrollable]="true"
            scrollHeight="50rem"
            editMode="row">
            <ng-template pTemplate="caption">
              <div class="row g-4 p-3">
                <div class="col-xs-12 col-sm-12 col-md-6 col-lg-4 col-xl-3 col-xxl-3">
                  <button pButton pRipple label="Adicional" icon="pi pi-plus" class="p-button-success" (click)="AgregarFila()"></button>
                </div>
              </div>
            </ng-template>
            <ng-template pTemplate="header">
              <tr>
                <th>#</th>
                <th>OT</th>
                <th>Ronda</th>
                <th>Maquina</th>
                <th>Cliente</th>
                <th>Item</th>
                <th>Referencia</th>
                <th>Ancho (Cms)</th>
                <th>Calibre</th>
                <th>Cod. Barras</th>
                <th>Tipo Embobinado</th>
                <th>Paso Entre Guía</th>
                <th>Observación</th>
                <th colspan="2"></th>
              </tr>
            </ng-template>
            <ng-template pTemplate="body" let-datos let-editing="editing" let-rowIndex="rowIndex">
              <tr [pEditableRow]="datos">
                <td>{{rowIndex + 1}}</td>
                <td>
                  <p-cellEditor>
                    <ng-template pTemplate="input">
                      <input pInputText type="text" [(ngModel)]="datos.orden">
                    </ng-template>
                    <ng-template pTemplate="output">
                      {{datos.orden}}
                    </ng-template>
                  </p-cellEditor>
                </td>
                <td>
                  <p-cellEditor>
                    <ng-template pTemplate="input">
                      <input pInputText type="text" [(ngModel)]="datos.ronda">
                    </ng-template>
                    <ng-template pTemplate="output">
                      {{datos.ronda}}
                    </ng-template>
                  </p-cellEditor>
                </td>
                <td>
                  <p-cellEditor>
                    <ng-template pTemplate="input">
                      <input pInputText type="text" [(ngModel)]="datos.maquina">
                    </ng-template>
                    <ng-template pTemplate="output">
                      {{datos.maquina}}
                    </ng-template>
                  </p-cellEditor>
                </td>
                <td>
                  <p-cellEditor>
                    <ng-template pTemplate="input">
                      <input pInputText type="text" [(ngModel)]="datos.cliente">
                    </ng-template>
                    <ng-template pTemplate="output">
                      {{datos.cliente}}
                    </ng-template>
                  </p-cellEditor>
                </td>
                <td>
                  <p-cellEditor>
                    <ng-template pTemplate="input">
                      <input pInputText type="text" [(ngModel)]="datos.item">
                    </ng-template>
                    <ng-template pTemplate="output">
                      {{datos.item}}
                    </ng-template>
                  </p-cellEditor>
                </td>
                <td>
                  <p-cellEditor>
                    <ng-template pTemplate="input">
                      <input pInputText type="text" [(ngModel)]="datos.referencia">
                    </ng-template>
                    <ng-template pTemplate="output">
                      {{datos.referencia}}
                    </ng-template>
                  </p-cellEditor>
                </td>
                <td>
                  <p-cellEditor>
                    <ng-template pTemplate="input">
                      <input pInputText type="text" [(ngModel)]="datos.ancho">
                    </ng-template>
                    <ng-template pTemplate="output">
                      {{datos.ancho}}
                    </ng-template>
                  </p-cellEditor>
                </td>
                <td>
                  <p-cellEditor>
                    <ng-template pTemplate="input">
                      <input pInputText type="text" [(ngModel)]="datos.calibre">
                    </ng-template>
                    <ng-template pTemplate="output">
                      {{datos.calibre}}
                    </ng-template>
                  </p-cellEditor>
                </td>
                <td>
                  <p-cellEditor>
                    <ng-template pTemplate="input">
                      <input pInputText type="text" [(ngModel)]="datos.codBarras">
                    </ng-template>
                    <ng-template pTemplate="output">
                      {{datos.codBarras}}
                    </ng-template>
                  </p-cellEditor>
                </td>
                <td>
                  <p-cellEditor>
                    <ng-template pTemplate="input">
                      <input pInputText type="text" [(ngModel)]="datos.tpEmbobinado">
                    </ng-template>
                    <ng-template pTemplate="output">
                      {{datos.tpEmbobinado}}
                    </ng-template>
                  </p-cellEditor>
                </td>
                <td>
                  <p-cellEditor>
                    <ng-template pTemplate="input">
                      <input pInputText type="text" [(ngModel)]="datos.pasoGuia">
                    </ng-template>
                    <ng-template pTemplate="output">
                      {{datos.pasoGuia}}
                    </ng-template>
                  </p-cellEditor>
                </td>
                <td>
                  <p-cellEditor>
                    <ng-template pTemplate="input">
                      <input pInputText type="text" [(ngModel)]="datos.observacion">
                    </ng-template>
                    <ng-template pTemplate="output">
                      {{datos.observacion}}
                    </ng-template>
                  </p-cellEditor>
                </td>
                <td>
                  <div class="flex align-items-center justify-content-center gap-2">
                    <button *ngIf="!editing" pButton pRipple type="button" pInitEditableRow icon="pi pi-pencil" class="p-button-rounded p-button-text"></button>
                    <button *ngIf="editing" pButton pRipple type="button" pSaveEditableRow icon="pi pi-check" class="p-button-rounded p-button-text p-button-success mr-2"></button>
                    <button *ngIf="editing" pButton pRipple type="button" pCancelEditableRow icon="pi pi-times" class="p-button-rounded p-button-text p-button-danger"></button>
                  </div>
                </td>
              </tr>
            </ng-template>
          </p-table>
          
        </p-tabPanel>
        
        <p-tabPanel
          header="Impresión"
          leftIcon="pi pi-print"
          tooltip="Control de Impresión">
          
        </p-tabPanel>
        
        <p-tabPanel
          header="Corte y Doblado"
          leftIcon="pi pi-database"
          tooltip="Control de Corte y Doblado">
          
        </p-tabPanel>
        
        <p-tabPanel
          header="Sellado"
          leftIcon="pi pi-map"
          tooltip="Control de Sellado">
          
        </p-tabPanel>
      </p-tabView>
    </div>
</p-card>