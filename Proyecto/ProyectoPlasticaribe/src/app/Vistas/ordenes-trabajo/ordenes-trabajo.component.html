<ng-container *ngIf="!vistaPedidos">
  <app-menuLateral></app-menuLateral>
</ng-container>

<div class="d-flex justify-content-center overlay" *ngIf="!cargando">
  <div class="spinner-border text-danger" role="status" style="margin: auto;">
    <span class="visually-hidden">Cargando...</span>
  </div>
</div>

<!-- <div class="overlay" *ngIf="!cargando">
  <div class="spinner ">
    <img src="https://media.giphy.com/media/3oEjI6SIIHBdRxXI40/giphy.gif"/>
  </div>
</div> -->

<div class="contain">
  <!-- Navegador fin de parte superior -->
  <div class="container-fluid">
    <div class="mb-4 Titulo">
      <h2 class="tituloRojo">Ordenes de Trabajo</h2>
    </div>
    <div class="mb-4">
      <hr class="colorLinea">
    </div>
  </div>
</div>

<div class="contain">
  <!--Inicio info OT-->
  <div class="container-fluid bajarPagina">
    <div class="container">

      <div class="d-grid gap-2 d-md-flex justify-content-md-end">
        <h4 class="tituloRojo" title="Consecutivo sobre el cual se crea una nueva OT">OT N° {{ultimaOrdenTrabajo}}</h4>
      </div>

      <div class="mb-4">
        <h4 class="tituloRojo">Consultar/Crear OT</h4>
      </div>

      <form [formGroup]="FormOrdenTrabajo">
        <!--Primera fila de inputs-->
        <div class="mb-3">
          <div class="row g-3">
            <!-- OT -->
            <div class="form-floating col-md-2">
              <input formControlName="OT_Id" type="number" class="form-control form-control-sm" id="floatingInput" (keyup.Enter)="consultarOT()" required >
              <label for="floatingInput">Nro. OT</label>
            </div>

            <!-- Nro. Pedido -->
            <div class="ng-autocomplete form-floating col-md-3 form-control form-control-sm" style="width: 50%;">
              <ng-autocomplete
                class=""
                [data]="pedidosSinOT"
                (selected)='consultarPedido($event)'
                (inputChanged)='onChangeSearchPedido($event)'
                (inputFocused)='onFocusedNombrePedido($event)'
                [searchKeyword]="keywordPedidos"
                [itemTemplate]="itemTemplate"
                [notFoundTemplate]="notFoundTemplate"
                id="floatingInput"
                formControlName="Pedido_Id">
              </ng-autocomplete>
              <ng-template #itemTemplate let-item>
                <a [innerHTML]="item.nombre"></a>
              </ng-template>
              <ng-template #notFoundTemplate let-notFound>
                <div [innerHTML]="notFound"></div>
              </ng-template>
              <label for="floatingInput" *ngIf="validarInputPedidos">Pedidos</label>
            </div>

            <!--Vendedor-->
            <div class="form-floating col-md-4">
              <input formControlName="Nombre_Vendedor" type="text" class="form-control form-control-sm" id="floatingInput" required >
              <label for="floatingInput">Vendedor</label>
            </div>
          </div>
        </div>

        <!--Fila 2-->
        <div class="mb-3">
          <div class="row g-3">
            <!-- Fecha creacion -->
            <div class="form-floating col-md-2">
              <input formControlName="OT_FechaCreacion" type="date" class="form-control form-control-sm" id="floatingInput" required title="Fecha creación" readonly onmousedown="return false;">
              <label for="floatingInput">Fecha Creación</label>
            </div>

            <!-- Fecha Estimada Entrega -->
            <div class="form-floating col-md-2">
              <input formControlName="OT_FechaEntrega" type="date" class="form-control form-control-sm" id="floatingInput" required title="Fecha estimada de entrega">
              <label for="floatingInput">Fecha Entrega</label>
            </div>

            <!-- ID Sede Cliente -->
            <div class="form-floating col-md-2">
              <input formControlName="ID_Cliente" type="text" class="form-control form-control-sm" id="floatingInput" required >
              <label for="floatingInput">ID Cliente</label>
            </div>

            <!-- Cliente -->
            <div class="form-floating col-md-4">
              <input formControlName="Nombre_Cliente" type="text" class="form-control form-control-sm" id="floatingInput" required >
              <label for="floatingInput">Nombre Cliente</label>
            </div>

            <!-- Ciudad Cliente -->
            <div class="form-floating col-md-2">
              <input formControlName="Ciudad_SedeCliente" type="text" class="form-control form-control-sm" id="floatingInput" required >
              <label for="floatingInput">Ciudad Cliente</label>
            </div>
          </div>
        </div>

        <!--Fila 3-->
        <div class="mb-4">
          <div class="row g-3">
            <!-- Sede -->
            <div class="form-floating col-md-3">
              <input formControlName="Direccion_SedeCliente" type="text" class="form-control form-control-sm" id="floatingInput" required >
              <label for="floatingInput">Direccion Sede</label>
            </div>

            <!-- Estado -->
            <div class="form-floating col-md-2">
              <select formControlName="OT_Estado" id="floatingSelect" type="text" name="PextEstadoId" class="form-select form-select-sm" aria-label=".form-select-sm example" required readonly onmousedown="return false;">
                <option [ngValue]="estados" *ngFor="let estados of estados">{{estados}}</option>
              </select>
              <label for="floatingSelect">Estado de la OT</label>
            </div>

            <!-- Campo Observacion -->
            <div class="form-floating col-md-7">
              <textarea formControlName="OT_Observacion" id="floatingTextArea" type="text" class="form-control form-control-sm" title="Descripción"></textarea>
              <label for="floatingTextArea">Observación</label>
            </div>

            <!-- Margen -->
            <div class="form-floating col-md-2">
              <input formControlName="Margen" type="number" class="form-control form-control-sm" min="0" max="100" id="floatingInput" required>
              <label for="floatingInput">Margen (%)</label>
              <div>
                <label><b>Cant Kg total: </b>{{cantidadKgMasMargen | number}}</label>
              </div>
              <div>
                <label><b>Cant Und total: </b>{{cantidadUndMasMargen | number}}</label>
              </div>
            </div>

            <!-- <div class="form-floating col-md-1">
              <mat-checkbox
                formControlName="OT_Cyrel"
                style="margin-top: 15px; margin-left: 30px; height: 12px;"
                id="extrusion"
                (change)="CheckExtrusion($event)"
                [(ngModel)]="checkedExtrusion">
                Extrusion
              </mat-checkbox>
            </div> -->

            <!-- Cyrel -->
            <div class="form-floating col-md-1">
              <mat-checkbox
                formControlName="OT_Cyrel"
                id="cyrel"
                style="margin-top: 15px; margin-left: 30px; height: 12px;"
                [(ngModel)]="checkedCyrel">
                Cyrel
              </mat-checkbox>
            </div>

            <!-- Corte -->
            <div class="form-floating col-md-1">
              <mat-checkbox
                formControlName="OT_Corte"
                id="corte"
                style="margin-top: 15px; margin-left: 30px; height: 12px;"
                [(ngModel)]="checkedCorte">
                Corte
              </mat-checkbox>
            </div>
          </div>
        </div>
      </form>

      <div class="mb-4">
        <hr class="colorLinea">
      </div>

       <!--Titulo tabla-->
      <div class="mb-3">
        <h4 class="tituloRojo">Tabla de Productos Pedidos</h4>
      </div>

      <!-- Inicio tabla producto -->
      <div class="mb-3">
        <div class="row g-3">
          <div class="table-responsive">
            <table class="table table-bordered table-hover mt-2" title="Al seleccionar un registro, se cargará la información de la última OT que incluía dicho producto en las secciones de producción">
              <thead class="TitulosTabla">
                <tr *ngFor="let columnas of titulosTabla let i = index">
                  <th scope="col" class="idProducto">{{columnas.pID}}</th>
                  <th id="nombre" scope="col">{{columnas.pNombre}}</th>
                  <th id="ancho" scope="col" class="">{{columnas.pAncho}}</th>
                  <th id="fuelle" scope="col">{{columnas.pFuelle}}</th>
                  <!-- <th id="calibre" scope="col">{{columnas.pCalibre}}</th> -->
                  <th id="largo" scope="col">{{columnas.pLargo}}</th>
                  <th id="undMedidaPeso" scope="col">{{columnas.pUndMedACF}}</th>
                  <th id="largo" scope="col">{{columnas.pPesoMillar}}</th>
                  <th id="tipoProducto" scope="col">{{columnas.pTipoProd}}</th>
                  <!-- <th id="material" scope="col">{{columnas.pMaterial}}</th>
                  <th id="pigmento" scope="col">{{columnas.pPigmento}}</th> -->
                  <th id="cantidad" scope="col">{{columnas.pCantPaquete}}</th>
                  <th id="cantidad" scope="col">{{columnas.pCantBulto}}</th>
                  <th id="cantidad" scope="col">{{columnas.pCantidad}}</th>
                  <th id="undMedidaCantidad" scope="col">{{columnas.pUndMedCant}}</th>
                  <th id="undMedidaCantidad" scope="col">{{columnas.pTipoSellado}}</th>
                  <th id="precioUnitario" scope="col">{{columnas.pPrecioU}}</th>
                  <th id="Subtotal" scope="col">{{columnas.pSubtotal}}</th>
                </tr>
              </thead>
              <tbody>
                <tr *ngFor="let listaProductos of ArrayProducto; let j = index">
                  <th id="id" class="TextosInfoTabla" (click)="consultar_Prod_Cli_Presentacion(listaProductos)">{{listaProductos.Id}}</th>
                  <td id="nombreCampo" class="TextosInfoTabla" (click)="consultar_Prod_Cli_Presentacion(listaProductos)">{{listaProductos.Nombre}}</td>
                  <td id="ancho" class="TextosInfoTabla" (click)="consultar_Prod_Cli_Presentacion(listaProductos)">{{listaProductos.Ancho}}</td>
                  <td id="fuelle" class="TextosInfoTabla" (click)="consultar_Prod_Cli_Presentacion(listaProductos)">{{listaProductos.Fuelle}}</td>
                  <!-- <td id="calibre" class="TextosInfoTabla" (click)="consultar_Prod_Cli_Presentacion(listaProductos)">{{listaProductos.Cal}}</td> -->
                  <td id="largo" class="TextosInfoTabla" (click)="consultar_Prod_Cli_Presentacion(listaProductos)">{{listaProductos.Largo}}</td>
                  <td id="undMedidaPeso" class="TextosInfoTabla" (click)="consultar_Prod_Cli_Presentacion(listaProductos)">{{listaProductos.Und}}</td>
                  <td id="largo" class="TextosInfoTabla" (click)="consultar_Prod_Cli_Presentacion(listaProductos)">{{listaProductos.PesoMillar}}</td>
                  <td id="tipoProducto" class="TextosInfoTabla" (click)="consultar_Prod_Cli_Presentacion(listaProductos)">{{listaProductos.Tipo}}</td>
                  <!-- <td id="material" class="TextosInfoTabla" (click)="consultar_Prod_Cli_Presentacion(listaProductos)">{{listaProductos.Material}}</td>
                  <td id="pigmento" class="TextosInfoTabla" (click)="consultar_Prod_Cli_Presentacion(listaProductos)">{{listaProductos.Pigmento}}</td> -->
                  <td id="cantidadDisponible" class="TextosInfoTabla" (click)="consultar_Prod_Cli_Presentacion(listaProductos)">{{listaProductos.CantPaquete}}</td>
                  <td id="cantidadDisponible" class="TextosInfoTabla" (click)="consultar_Prod_Cli_Presentacion(listaProductos)">{{listaProductos.CantBulto}}</td>
                  <td id="cantidadDisponible" class="TextosInfoTabla" (click)="consultar_Prod_Cli_Presentacion(listaProductos)">{{listaProductos.Cant}}</td>
                  <td id="undMedidaCantidad" class="TextosInfoTabla" (click)="consultar_Prod_Cli_Presentacion(listaProductos)">{{listaProductos.UndCant}}</td>
                  <td id="undMedidaCantidad" class="TextosInfoTabla" (click)="consultar_Prod_Cli_Presentacion(listaProductos)">{{listaProductos.TipoSellado}}</td>
                  <td id="precioUnitario" class="TextosInfoTabla" (click)="consultar_Prod_Cli_Presentacion(listaProductos)">{{listaProductos.PrecioUnd | currency }}</td>
                  <td id="Subtotal" class="TextosInfoTabla">{{listaProductos.SubTotal | currency }}</td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>

        <!--Linea-->
      <div class="mb-4">
        <hr class="colorLinea">
      </div>

      <!--Titulo procesos-->
      <div class="mb-3">
        <h4 class="tituloRojo">Procesos de Producción</h4>
      </div>

        <!-- TABS de Procesos -->
      <ul class="nav nav-tabs justify-content-md-center" >
        <li class="nav-item">
          <button class="nav-link active" data-bs-toggle="tab" data-bs-target="#Extrusión" type="button" role="tab">Extrusión</button>
        </li>
        <li class="nav-item">
          <button class="nav-link" data-bs-toggle="tab" data-bs-target="#Impresión" type="button" role="tab">Impresión</button>
        </li>
        <li class="nav-item">
          <button class="nav-link" data-bs-toggle="tab" data-bs-target="#Laminado" type="button" role="tab">Laminado</button>
        </li>
        <li class="nav-item">
          <button class="nav-link" data-bs-toggle="tab" data-bs-target="#Mezclas" type="button" role="tab">Mezclas</button>
        </li>
      </ul>

      <!-- TABS de Informacion de los Procesos -->
      <div class="tab-content" id="myTabContent">
        <!-- Extrusion -->
        <div class="tab-pane fade show active" id="Extrusión" role="tabpanel" aria-labelledby="Extrusión-tab">
          <form [formGroup]="FormOrdenTrabajoExtrusion">
            <div class="mb-3" >
              <div class="row g-3 justify-content-md-center">

                <!-- Cantidad a extruir -->
                <div class="form-floating col-md-2">
                  <input formControlName="cantidad_Extrusion" type="number" class="form-control form-control-sm" id="floatingInput" required title="Cantidad a extruir">
                  <label for="floatingInput">Cantidad</label>
                </div>

                <!-- Material -->
                <div class="form-floating col-md-2">
                  <select formControlName="Material_Extrusion" id="floatingSelect" type="text" class="form-select form-select-sm" aria-label=".form-select-sm example" required>
                    <option [ngValue]="MaterialPrd" *ngFor="let MaterialPrd of arrayMateriales">{{MaterialPrd}}</option>
                  </select>
                  <label for="floatingSelect">Material</label>
                </div>

                <!-- Formato -->
                <div class="form-floating col-md-2">
                  <select formControlName="Formato_Extrusion" id="floatingSelect" type="text" class="form-select form-select-sm" aria-label=".form-select-sm example" required>
                    <option [ngValue]="formato" *ngFor="let formato of formatos">{{formato}}</option>
                  </select>
                  <label for="floatingSelect">Formato</label>
                </div>

                 <!-- Pigmento -->
                <div class="form-floating col-md-2">
                  <select formControlName="Pigmento_Extrusion" id="floatingSelect" type="text" n class="form-select form-select-sm" aria-label=".form-select-sm example" required>
                    <option [ngValue]="Pigmentos" *ngFor="let Pigmentos of arrayPigmentos">{{Pigmentos}}</option>
                  </select>
                  <label for="floatingSelect">Pigmento</label>
                </div>
              </div>
            </div>

            <!--Fila 2 -->
            <div class="mb-3">
              <div class="row g-3 justify-content-md-center" >

                <!--Ancho 1 -->
                <div class="form-floating col-md-1">
                  <input formControlName="Ancho_Extrusion1" type="number" class="form-control form-control-sm" id="floatingInput" required title="Cantidad a extruir">
                  <label for="floatingInput">Ancho 1</label>
                </div>

                <!--Ancho 2-->
                <div class="form-floating col-md-1">
                  <input formControlName="Ancho_Extrusion2" type="number" class="form-control form-control-sm" id="floatingInput" required title="Cantidad a extruir">
                  <label for="floatingInput">Ancho 2</label>
                </div>

                <!--Ancho 3-->
                <div class="form-floating col-md-1">
                  <input formControlName="Ancho_Extrusion3" type="number" class="form-control form-control-sm" id="floatingInput" required title="Cantidad a extruir">
                  <label for="floatingInput">Ancho 3</label>
                </div>

                 <!-- Formato -->
                 <div class="form-floating col-md-1">
                  <input formControlName="Calibre_Extrusion" type="number" class="form-control form-control-sm" id="floatingInput" required title="Cantidad a extruir">
                  <label for="floatingInput">Calibre</label>
                </div>

                <!-- Unidad Medida -->
                <div class="form-floating col-md-2">
                  <select formControlName="UnidadMedida_Extrusion" id="floatingSelect" type="text" class="form-select form-select-sm" aria-label=".form-select-sm example" required>
                    <option [ngValue]="UndMedida" *ngFor="let UndMedida of arrayUnidadesMedidas">{{UndMedida}}</option>
                  </select>
                  <label for="floatingSelect">Und. Medida</label>
                </div>

                 <!-- Formato -->
                <div class="form-floating col-md-2">
                  <select formControlName="Tratado_Extrusion" id="floatingSelect" type="text" n class="form-select form-select-sm" aria-label=".form-select-sm example" required>
                    <option [ngValue]="tratados" *ngFor="let tratados of tratado">{{tratados}}</option>
                  </select>
                  <label for="floatingSelect">Tratado</label>
                </div>
              </div>
            </div>
          </form>
        </div>

        <!-- Impresion -->
        <div class="tab-pane fade" id="Impresión" role="tabpanel" aria-labelledby="Impresión-tab">
          <form [formGroup]="FormOrdenTrabajoImpresion">

            <!--Fila 1-->
            <div class="mb-3" >
              <div class="row g-3 justify-content-md-center">
                <!-- Cantidad a extruir -->
                <div class="form-floating col-md-2">
                  <input formControlName="cantidad_Impresion" type="number" class="form-control form-control-sm" id="floatingInput" required title="Cantidad a imprimir">
                  <label for="floatingInput">Cantidad</label>
                </div>

                <!-- Material -->
                <div class="form-floating col-md-2">
                  <select formControlName="Tipo_Impresion" id="floatingSelect" type="text" class="form-select form-select-sm" aria-label=".form-select-sm example" required>
                    <option [ngValue]="tipoImpresion" *ngFor="let tipoImpresion of tiposImpresion">{{tipoImpresion}}</option>
                  </select>
                  <label for="floatingSelect">Tipo Impresión</label>
                </div>

                <!-- Rodillo -->
                <div class="form-floating col-md-2">
                  <!-- <select formControlName="Rodillo_Impresion" id="floatingSelect" type="text" class="form-select form-select-sm" aria-label=".form-select-sm example" required>
                    <option value="1" disabled selected></option>
                    <option [ngValue]="rodillo" *ngFor="let rodillo of rodillos">{{rodillo}}</option>
                  </select>
                  <label for="floatingSelect">Rodillo</label> -->

                  <input formControlName="Rodillo_Impresion" type="number" class="form-control form-control-sm" id="floatingInput" required title="Cantidad a imprimir">
                  <label for="floatingInput">Rodillo</label>
                </div>

                 <!-- Psita -->
                <div class="form-floating col-md-2">
                  <!-- <select formControlName="Pista_Impresion" id="floatingSelect" type="text" n class="form-select form-select-sm" aria-label=".form-select-sm example" required>
                    <option value="1" disabled selected></option>
                    <option [ngValue]="pista" *ngFor="let pista of pistas">{{pista}}</option>
                  </select>
                  <label for="floatingSelect">Pista</label> -->

                  <input formControlName="Pista_Impresion" type="number" class="form-control form-control-sm" id="floatingInput" required title="Cantidad a imprimir">
                  <label for="floatingInput">Pista</label>
                </div>

              </div>
            </div>

            <!--Fila 2-->
            <div class="mb-3" style="text-align: center;">
                <h6 class="tituloRojo">Tintas</h6>
            </div>

             <!--Fila 3-->
            <div class="mb-3" >
              <div class="row g-3 justify-content-md-center">

                <!-- Tinta 1 -->
                <div class="form-floating col-md-2">
                  <select formControlName="Tinta_Impresion1" id="floatingSelect" type="text" n class="form-select form-select-sm" aria-label=".form-select-sm example" required>
                    <option [ngValue]="NombreTintas" *ngFor="let NombreTintas of arrayTintas">{{NombreTintas}}</option>
                  </select>
                  <label for="floatingSelect">Tinta 1 (Opcional)</label>
                </div>

                <!-- Tinta 2 -->
                <div class="form-floating col-md-2">
                  <select formControlName="Tinta_Impresion2" id="floatingSelect" type="text" class="form-select form-select-sm" aria-label=".form-select-sm example" required>
                    <option [ngValue]="NombreTintas" *ngFor="let NombreTintas of arrayTintas">{{NombreTintas}}</option>
                  </select>
                  <label for="floatingSelect">Tinta 2 (Opcional)</label>
                </div>

                <!-- Tinta 3 -->
                <div class="form-floating col-md-2">
                  <select formControlName="Tinta_Impresion3" id="floatingSelect" type="text" class="form-select form-select-sm" aria-label=".form-select-sm example" required>
                    <option [ngValue]="NombreTintas" *ngFor="let NombreTintas of arrayTintas">{{NombreTintas}}</option>
                  </select>
                  <label for="floatingSelect">Tinta 3 (Opcional)</label>
                </div>

                 <!-- Tinta 4 -->
                <div class="form-floating col-md-2">
                  <select formControlName="Tinta_Impresion4" id="floatingSelect" type="text" n class="form-select form-select-sm" aria-label=".form-select-sm example" required>
                    <option [ngValue]="NombreTintas" *ngFor="let NombreTintas of arrayTintas">{{NombreTintas}}</option>
                  </select>
                  <label for="floatingSelect">Tinta 4</label>
                </div>

              </div>
            </div>

             <!--Fila 4 -->
             <div class="mb-3" >
              <div class="row g-3 justify-content-md-center">
                <!-- Cantidad a extruir -->
                <div class="form-floating col-md-2">
                  <select formControlName="Tinta_Impresion5" id="floatingSelect" type="text" n class="form-select form-select-sm" aria-label=".form-select-sm example" required>
                    <option [ngValue]="NombreTintas" *ngFor="let NombreTintas of arrayTintas">{{NombreTintas}}</option>
                  </select>
                  <label for="floatingSelect">Tinta 5</label>
                </div>

                <!-- Material -->
                <div class="form-floating col-md-2">
                  <select formControlName="Tinta_Impresion6" id="floatingSelect" type="text" class="form-select form-select-sm" aria-label=".form-select-sm example" required>
                    <option [ngValue]="NombreTintas" *ngFor="let NombreTintas of arrayTintas">{{NombreTintas}}</option>
                  </select>
                  <label for="floatingSelect">Tinta 6</label>
                </div>

                <!-- Formato -->
                <div class="form-floating col-md-2">
                  <select formControlName="Tinta_Impresion7" id="floatingSelect" type="text" class="form-select form-select-sm" aria-label=".form-select-sm example" required>
                    <option [ngValue]="NombreTintas" *ngFor="let NombreTintas of arrayTintas">{{NombreTintas}}</option>
                  </select>
                  <label for="floatingSelect">Tinta 7</label>
                </div>

                 <!-- Formato -->
                <div class="form-floating col-md-2">
                  <select formControlName="Tinta_Impresion8" id="floatingSelect" type="text" n class="form-select form-select-sm" aria-label=".form-select-sm example" required>
                    <option [ngValue]="NombreTintas" *ngFor="let NombreTintas of arrayTintas">{{NombreTintas}}</option>
                  </select>
                  <label for="floatingSelect">Tinta 8</label>
                </div>

              </div>
            </div>

          </form>
        </div>

        <!-- Laminado -->
        <div class="tab-pane fade" id="Laminado" role="tabpanel" aria-labelledby="Laminado-tab">
          <form [formGroup]="FormOrdenTrabajoLaminado">
                <!--Fila 1-->
            <div class="mb-3" >
              <div class="row g-3 justify-content-md-center">

                <!-- Cantidad a laminar -->
                <div class="form-floating col-md-2">
                  <input formControlName="cantidad_Laminado" type="number" class="form-control form-control-sm" id="floatingInput" required title="Cantidad a Laminar">
                  <label for="floatingInput">Cantidad</label>
                </div>
              </div>
            </div>

            <!--Fila 2-->
            <div class="mb-3" >
              <div class="row g-3 justify-content-md-center">

                <!--Capa 1-->
                <div class="form-floating col-md-2">
                  <select formControlName="Capa_Laminado1" id="floatingSelect" type="text" class="form-select form-select-sm" aria-label=".form-select-sm example" required>
                    <option [ngValue]="lamCapas" *ngFor="let lamCapas of laminado_capas">{{lamCapas}}</option>
                  </select>
                  <label for="floatingSelect">Capa 1</label>
                </div>

                <!--Calibre 1-->
                <div class="form-floating col-md-2">
                  <input formControlName="Calibre_Laminado1" type="number" class="form-control form-control-sm" id="floatingInput" required >
                  <label for="floatingInput">Calibre 1 </label>
                </div>
                <!--Cantidad x capa 1-->
                <div class="form-floating col-md-2">
                  <input formControlName="cantidad_Laminado1" type="number" class="form-control form-control-sm" id="floatingInput" required >
                  <label for="floatingInput">Cantidad 1</label>
                </div>
              </div>
            </div>

            <!--Fila 3-->
            <div class="mb-3" >
              <div class="row g-3 justify-content-md-center">

                <!--Capa 2-->
                <div class="form-floating col-md-2">
                  <select formControlName="Capa_Laminado2" id="floatingSelect" type="text" class="form-select form-select-sm" aria-label=".form-select-sm example" required>
                    <option [ngValue]="lamCapas" *ngFor="let lamCapas of laminado_capas">{{lamCapas}}</option>
                  </select>
                  <label for="floatingSelect">Capa 2</label>
                </div>

                <!--Calibre 2-->
                <div class="form-floating col-md-2">
                  <input formControlName="Calibre_Laminado2" type="number" class="form-control form-control-sm" id="floatingInput" required>
                  <label for="floatingInput">Calibre 2 </label>
                </div>

                <!--Cantidad x capa 2-->
                <div class="form-floating col-md-2">
                  <input formControlName="cantidad_Laminado2" type="number" class="form-control form-control-sm" id="floatingInput" required>
                  <label for="floatingInput">Cantidad 2</label>
                </div>
              </div>
            </div>

             <!--Fila 4-->
             <div class="mb-3" >
              <div class="row g-3 justify-content-md-center">

                <!--Capa 3-->
                <div class="form-floating col-md-2">
                  <select formControlName="Capa_Laminado3" id="floatingSelect" type="text" class="form-select form-select-sm" aria-label=".form-select-sm example" required>
                    <option [ngValue]="lamCapas" *ngFor="let lamCapas of laminado_capas">{{lamCapas}}</option>
                  </select>
                  <label for="floatingSelect">Capa 3</label>
                </div>

                <!--Calibre 3-->
                <div class="form-floating col-md-2">
                  <input formControlName="Calibre_Laminado3" type="number" class="form-control form-control-sm" id="floatingInput" required >
                  <label for="floatingInput">Calibre 3</label>
                </div>

                <!--Cantidad x capa 3-->
                <div class="form-floating col-md-2">
                  <input formControlName="cantidad_Laminado3" type="number" class="form-control form-control-sm" id="floatingInput" required >
                  <label for="floatingInput">Cantidad 3</label>
                </div>
              </div>
            </div>

          </form>
        </div>

        <!-- Mezclas -->
        <div class="tab-pane fade" id="Mezclas" role="tabpanel" aria-labelledby="Mezclas-tab">

            <!--Boton para llamar el modal de crear mezclas-->
            <div class="container">
              <div class="d-grid gap-2 d-md-flex justify-content-md-end">
                <button pButton pRipple label="Crear Mezclas" icon="pi pi-plus" class="p-button-danger r-2" (click)="cargarModalMezclas()"></button>
              </div>
            </div>

            <!-- Modal para crear mezclas -->
            <p-dialog header="Crear Mezclas Predefinidas" [(visible)]="modalMezclas" [style]="{width: '70%'}" [modal]="true" [resizable]="true" styleClass="p-fluid">
              <div class="container"></div>
                <div class="d-grid gap-2 d-md-flex justify-content-md-end">
                  <button class=" btn btn-danger btn-danger-sm" type="button" (click)="cargarModalMateriales()"><i class="pi pi-plus"></i> Crear Materiales</button>
                  <button class=" btn btn-danger btn-danger-sm" type="button" (click)="cargarModalPigmentos()"><i class="pi pi-plus"></i> Crear Pigmentos</button>
                </div>

                <!--Modal Materiales -->
                <p-dialog header="Creación de Materiales" [(visible)]="modalMateriales" [style]="{width: '30%'}" [modal]="true" [resizable]="true" styleClass="p-fluid">
                  <form [formGroup]="formCrearMateriales">
                    <p-toast position="center"></p-toast>
                    <!-- Nombre -->
                    <div class="form-floating col-md mb-3">
                      <input formControlName="matNombre" class="form-control form-control-sm" list="materiales" id="floatingInput" required (change)="cargarMezclaMateria()">
                      <datalist id="materiales">
                        <option value={{item.mezMaterial_Nombre}} *ngFor="let item of mezclasMateriales2">{{item.mezMaterial_Nombre}}</option>
                      </datalist>
                      <label for="floatingInput">Nombre</label>
                    </div>

                    <!-- Descripcion -->
                    <div class="form-floating col-md mb-3">
                      <textarea formControlName="matDescripcion" style="height: 80px;"  type="text" class="form-control form-control-sm" id="floatingInput" autocomplete="off"></textarea>
                      <label for="floatingInput">Descripción</label>
                    </div>
                  </form>

                  <div class="d-grid gap-2 d-md-flex justify-content-md-center">
                    <button pButton pRipple label="Crear Material" icon="pi pi-plus" class="p-button-danger r-2" (click)="crearMaterial()"></button>
                  </div>
                </p-dialog>

                <!-- Modal Pigmentos -->
                <p-dialog header="Creación de Pigmentos" [(visible)]="modalPigmentos" [style]="{width: '30%'}" [modal]="true" [resizable]="true" styleClass="p-fluid">
                  <form [formGroup]="formCrearPigmentos">
                    <p-toast position="center"></p-toast>
                    <!-- Nombre -->
                    <div class="form-floating col-md mb-3">
                      <input formControlName="pigNombre" class="form-control form-control-sm" list="pigmentos" id="floatingInput" required (change)="cargarMezclaPigmento()">
                      <datalist id="pigmentos">
                        <option value={{item.mezPigmto_Nombre}} *ngFor="let item of mezclasPigmentos2">{{item.mezPigmto_Nombre}}</option>
                      </datalist>
                      <label for="floatingInput">Nombre</label>
                    </div>

                    <!-- Descripcion -->
                    <div class="form-floating col-md mb-3">
                      <textarea formControlName="pigDescripcion" style="height: 80px;"  type="text" class="form-control form-control-sm" id="floatingInput" autocomplete="off"></textarea>
                      <label for="floatingInput">Descripción</label>
                    </div>
                  </form>

                  <div class="d-grid gap-2 d-md-flex justify-content-md-center">
                    <button pButton pRipple label="Crear Pigmento" icon="pi pi-plus" class="p-button-danger r-2" (click)="crearPigmento()"></button>
                  </div>
                </p-dialog>


              <form [formGroup]="formCrearMezclas">
                <p-toast position="center"></p-toast>

              <!--Fila 1-->
              <div class="mb-3">
                <div class="row g-3 justify-content-md-center">
                   <!-- Nombre Mezcla -->
                  <div class="form-floating col-md-6">
                    <input formControlName="Nombre_Mezclas" class="form-control form-control-sm" list="mezclas" id="floatingInput" title="Nombre de la Mezcla" required (change)="cargarCombinacionMezclas2()">
                    <datalist id="mezclas">
                      <option value={{item.mezcla_Nombre}} *ngFor="let item of mezclas">{{item.mezcla_Nombre}}</option>
                    </datalist>
                    <label for="floatingInput">Mezclas</label>
                  </div>

                   <!-- Material -->
                   <div class="form-floating col-md-2">
                    <select formControlName="Material_MatPrima" id="floatingSelect" type="text" class="form-select form-select-sm" aria-label=".form-select-sm example" required>
                      <option [ngValue]="MaterialPrd.material_Id" *ngFor="let MaterialPrd of arrayMateriales2">{{MaterialPrd.material_Nombre}}</option>
                    </select>
                    <label for="floatingSelect">Material</label>
                  </div>
                </div>
              </div>

                <!--Fila 2 y 3 Checkbox-->
                <div class="mb-4">
                  <div style="text-align: center;">

                    <div class="mb-3">
                      <h6 class="tituloRojo">N° de capas</h6>
                    </div>

                    <div class="form-check form-check-inline">
                      <input class="form-check-input" formControlName="Chechbox_Capa1" type="checkbox" id="capa1" [(ngModel)]="checkedCapa1" value="option1" (click)="cambiarNroCapas1()">
                      <label class="form-check-label" for="inlineCheckbox1">1</label>
                    </div>

                    <div class="form-check form-check-inline">
                      <input class="form-check-input" formControlName="Chechbox_Capa2" type="checkbox" id="capa2" [(ngModel)]="checkedCapa2" value="option2" (click)="cambiarNroCapas2()">
                      <label class="form-check-label" for="inlineCheckbox2">2</label>
                    </div>

                    <div class="form-check form-check-inline">
                      <input class="form-check-input" formControlName="Chechbox_Capa3" type="checkbox" id="capa3" [(ngModel)]="checkedCapa3" value="option3" (click)="cambiarNroCapas3()">
                      <label class="form-check-label" for="inlineCheckbox3">3</label>
                    </div>
                  </div>
                </div>

                <div class="mb-3"  style="text-align: center;">
                  <h6 class="tituloRojo">Porcentajes de mezcla de capas</h6>
                </div>

                <!--Fila 4-->
                <div class="mb-4" >
                  <div class="row g-3 justify-content-md-center">

                    <!--Capa 1 unica-->
                    <div class="form-floating col-md-2" *ngIf="checkedCapa1 || checkedCapa2 || checkedCapa3; else Capa1">
                      <input formControlName="Proc_Capa1" type="number" class="form-control form-control-sm" id="floatingInput" required >
                      <label for="floatingInput">% Capa 1</label>
                    </div>
                    <ng-template #Capa1>
                      <div class="form-floating col-md-2">
                        <input formControlName="Proc_Capa1" type="number" class="form-control form-control-sm" id="floatingInput" required readonly onmousedown="return false;">
                        <label for="floatingInput">% Capa 1</label>
                      </div>
                    </ng-template>

                    <!--Capa 2 interna-->
                    <div class="form-floating col-md-2" *ngIf="checkedCapa2 || checkedCapa3 else Capa2">
                      <input formControlName="Proc_Capa2" type="number" class="form-control form-control-sm" id="floatingInput" required >
                      <label for="floatingInput">% Capa 2</label>
                    </div>
                    <ng-template #Capa2>
                      <div class="form-floating col-md-2" #Capa2>
                        <input formControlName="Proc_Capa2" type="number" class="form-control form-control-sm" id="floatingInput" required readonly onmousedown="return false;">
                        <label for="floatingInput">% Capa 2</label>
                      </div>
                    </ng-template>

                    <!--Capa 3 Externa-->
                    <div class="form-floating col-md-2" *ngIf="checkedCapa3; else Capa3">
                      <input formControlName="Proc_Capa3" type="number" class="form-control form-control-sm" id="floatingInput" required >
                      <label for="floatingInput">% Capa 3</label>
                    </div>
                    <ng-template #Capa3>
                      <div class="form-floating col-md-2">
                        <input formControlName="Proc_Capa3" type="number" class="form-control form-control-sm" id="floatingInput" required readonly onmousedown="return false;">
                        <label for="floatingInput">% Capa 3</label>
                      </div>
                    </ng-template>

                  </div>
                </div>

                <div class="mb-3"  style="text-align: center;">
                  <h6 class="tituloRojo">Porcentajes de mezcla de materiales</h6>
                </div>

                <!--Fila 5-->
                <div class="mb-3" >
                  <div class="row g-3 justify-content-md-center">

                    <!--Material 1 Capa 1 -->
                    <div class="form-floating col-md-2" *ngIf="checkedCapa1 || checkedCapa2 || checkedCapa3; else m1c1">
                      <select formControlName="materialP1_Capa1" id="floatingSelect" type="text" class="form-select form-select-sm" aria-label=".form-select-sm example" required>
                        <option [ngValue]="mezMat.mezMaterial_Id" *ngFor="let mezMat of mezclasMateriales2">{{mezMat.mezMaterial_Nombre}}</option>
                      </select>
                      <label for="floatingSelect">Material 1</label>
                    </div>
                    <ng-template #m1c1>
                      <div class="form-floating col-md-2">
                        <select formControlName="materialP1_Capa1" id="floatingSelect" type="text" class="form-select form-select-sm" aria-label=".form-select-sm example" required readonly onmousedown="return false;">
                          <option [ngValue]="mezMat.mezMaterial_Id" *ngFor="let mezMat of mezclasMateriales2">{{mezMat.mezMaterial_Nombre}}</option>
                        </select>
                        <label for="floatingSelect">Material 1</label>
                      </div>
                    </ng-template>

                    <!--% Material 1 Capa 1-->
                    <div class="form-floating col-md-1" *ngIf="checkedCapa1 || checkedCapa2 || checkedCapa3; else pm1c1">
                      <input formControlName="PorcentajeMaterialP1_Capa1" type="number" class="form-control form-control-sm" id="floatingInput" required>
                      <label for="floatingInput">%</label>
                    </div>
                    <ng-template #pm1c1>
                      <div class="form-floating col-md-1">
                        <input formControlName="PorcentajeMaterialP1_Capa1" type="number" class="form-control form-control-sm" id="floatingInput" required readonly onmousedown="return false;">
                        <label for="floatingInput">%</label>
                      </div>
                    </ng-template>

                     <!--Material 1 Capa 2-->
                     <div class="form-floating col-md-2" *ngIf="checkedCapa2 || checkedCapa3 else m1c2">
                      <select formControlName="materialP1_Capa2" id="floatingSelect" type="text" class="form-select form-select-sm" aria-label=".form-select-sm example" required>
                        <option [ngValue]="mezMat.mezMaterial_Id" *ngFor="let mezMat of mezclasMateriales2">{{mezMat.mezMaterial_Nombre}}</option>
                      </select>
                      <label for="floatingSelect">Material 1</label>
                    </div>
                    <ng-template #m1c2>
                      <div class="form-floating col-md-2">
                        <select formControlName="materialP1_Capa2" id="floatingSelect" type="text" class="form-select form-select-sm" aria-label=".form-select-sm example" required readonly onmousedown="return false;">
                          <option [ngValue]="mezMat.mezMaterial_Id" *ngFor="let mezMat of mezclasMateriales2">{{mezMat.mezMaterial_Nombre}}</option>
                        </select>
                        <label for="floatingSelect">Material 1</label>
                      </div>
                    </ng-template>

                    <!--% Material 1 Capa 2-->
                    <div class="form-floating col-md-1" *ngIf="checkedCapa2 || checkedCapa3 else pm1c2">
                      <input formControlName="PorcentajeMaterialP1_Capa2" type="number" class="form-control form-control-sm" id="floatingInput" required>
                      <label for="floatingInput">%</label>
                    </div>
                    <ng-template #pm1c2>
                      <div class="form-floating col-md-1">
                        <input formControlName="PorcentajeMaterialP1_Capa2" type="number" class="form-control form-control-sm" id="floatingInput" required readonly onmousedown="return false;">
                        <label for="floatingInput">%</label>
                      </div>
                    </ng-template>

                     <!--Material 1 Capa 3-->
                     <div class="form-floating col-md-2" *ngIf="checkedCapa3; else m1c3">
                      <select formControlName="materialP1_Capa3" id="floatingSelect" type="text" class="form-select form-select-sm" aria-label=".form-select-sm example" required>
                        <option [ngValue]="mezMat.mezMaterial_Id" *ngFor="let mezMat of mezclasMateriales2">{{mezMat.mezMaterial_Nombre}}</option>
                      </select>
                      <label for="floatingSelect">Material 1</label>
                    </div>
                    <ng-template #m1c3>
                      <div class="form-floating col-md-2">
                        <select formControlName="materialP1_Capa3" id="floatingSelect" type="text" class="form-select form-select-sm" aria-label=".form-select-sm example" required readonly onmousedown="return false;">
                          <option [ngValue]="mezMat.mezMaterial_Id" *ngFor="let mezMat of mezclasMateriales2">{{mezMat.mezMaterial_Nombre}}</option>
                        </select>
                        <label for="floatingSelect">Material 1</label>
                      </div>
                    </ng-template>

                    <!--% Material 1 Capa 3-->
                    <div class="form-floating col-md-1" *ngIf="checkedCapa3; else pm1c3">
                      <input formControlName="PorcentajeMaterialP1_Capa3" type="number" class="form-control form-control-sm" id="floatingInput" required>
                      <label for="floatingInput">%</label>
                    </div>
                    <ng-template #pm1c3>
                      <div class="form-floating col-md-1">
                        <input formControlName="PorcentajeMaterialP1_Capa3" type="number" class="form-control form-control-sm" id="floatingInput" required readonly onmousedown="return false;">
                        <label for="floatingInput">%</label>
                      </div>
                    </ng-template>

                  </div>
                </div>

                <!--Fila 6-->
                <div class="mb-3" >
                  <div class="row g-3 justify-content-md-center">

                    <!--Material 2 Capa 1-->
                    <div class="form-floating col-md-2" *ngIf="checkedCapa1 || checkedCapa2 || checkedCapa3; else m2c1">
                      <select formControlName="materialP2_Capa1" id="floatingSelect" type="text" class="form-select form-select-sm" aria-label=".form-select-sm example" required>
                        <option [ngValue]="mezMat.mezMaterial_Id" *ngFor="let mezMat of mezclasMateriales2">{{mezMat.mezMaterial_Nombre}}</option>
                      </select>
                      <label for="floatingSelect">Material 2</label>
                    </div>
                    <ng-template #m2c1>
                      <div class="form-floating col-md-2">
                        <select formControlName="materialP2_Capa1" id="floatingSelect" type="text" class="form-select form-select-sm" aria-label=".form-select-sm example" required readonly onmousedown="return false;">
                          <option [ngValue]="mezMat.mezMaterial_Id" *ngFor="let mezMat of mezclasMateriales2">{{mezMat.mezMaterial_Nombre}}</option>
                        </select>
                        <label for="floatingSelect">Material 2</label>
                      </div>
                    </ng-template>

                    <!--% Material 2 Capa 1  -->
                    <div class="form-floating col-md-1" *ngIf="checkedCapa1 || checkedCapa2 || checkedCapa3; else pm2c1">
                      <input formControlName="PorcentajeMaterialP2_Capa1" type="number" class="form-control form-control-sm" id="floatingInput" required>
                      <label for="floatingInput">%</label>
                    </div>
                    <ng-template #pm2c1>
                      <div class="form-floating col-md-1">
                        <input formControlName="PorcentajeMaterialP2_Capa1" type="number" class="form-control form-control-sm" id="floatingInput" required readonly onmousedown="return false;">
                        <label for="floatingInput">%</label>
                      </div>
                    </ng-template>

                      <!--Material 2 Capa 2-->
                    <div class="form-floating col-md-2" *ngIf="checkedCapa2 || checkedCapa3 else m2c2">
                      <select formControlName="materialP2_Capa2" id="floatingSelect" type="text" class="form-select form-select-sm" aria-label=".form-select-sm example" required>
                        <option [ngValue]="mezMat.mezMaterial_Id" *ngFor="let mezMat of mezclasMateriales2">{{mezMat.mezMaterial_Nombre}}</option>
                      </select>
                      <label for="floatingSelect">Material 2</label>
                    </div>
                    <ng-template #m2c2>
                      <div class="form-floating col-md-2">
                        <select formControlName="materialP2_Capa2" id="floatingSelect" type="text" class="form-select form-select-sm" aria-label=".form-select-sm example" required readonly onmousedown="return false;">
                          <option [ngValue]="mezMat.mezMaterial_Id" *ngFor="let mezMat of mezclasMateriales2">{{mezMat.mezMaterial_Nombre}}</option>
                        </select>
                        <label for="floatingSelect">Material 2</label>
                      </div>
                    </ng-template>

                    <!--% Material 2 Capa 2-->
                    <div class="form-floating col-md-1" *ngIf="checkedCapa2 || checkedCapa3 else pm2c2">
                      <input formControlName="PorcentajeMaterialP2_Capa2" type="number" class="form-control form-control-sm" id="floatingInput" required>
                      <label for="floatingInput">%</label>
                    </div>
                    <ng-template #pm2c2>
                      <div class="form-floating col-md-1">
                        <input formControlName="PorcentajeMaterialP2_Capa2" type="number" class="form-control form-control-sm" id="floatingInput" required readonly onmousedown="return false;">
                        <label for="floatingInput">%</label>
                      </div>
                    </ng-template>

                      <!--Material 2 Capa 3-->
                    <div class="form-floating col-md-2" *ngIf="checkedCapa3 else m2c3">
                      <select formControlName="materialP2_Capa3" id="floatingSelect" type="text" class="form-select form-select-sm" aria-label=".form-select-sm example" required>
                        <option [ngValue]="mezMat.mezMaterial_Id" *ngFor="let mezMat of mezclasMateriales2">{{mezMat.mezMaterial_Nombre}}</option>
                      </select>
                      <label for="floatingSelect">Material 2</label>
                    </div>
                    <ng-template #m2c3>
                      <div class="form-floating col-md-2">
                        <select formControlName="materialP2_Capa3" id="floatingSelect" type="text" class="form-select form-select-sm" aria-label=".form-select-sm example" required readonly onmousedown="return false;">
                          <option [ngValue]="mezMat.mezMaterial_Id" *ngFor="let mezMat of mezclasMateriales2">{{mezMat.mezMaterial_Nombre}}</option>
                        </select>
                        <label for="floatingSelect">Material 2</label>
                      </div>
                    </ng-template>

                    <!--% Material 2 Capa 3-->
                    <div class="form-floating col-md-1"  *ngIf="checkedCapa3 else pm2c3">
                      <input formControlName="PorcentajeMaterialP2_Capa3" type="number" class="form-control form-control-sm" id="floatingInput" required>
                      <label for="floatingInput">%</label>
                    </div>
                    <ng-template #pm2c3>
                      <div class="form-floating col-md-1">
                        <input formControlName="PorcentajeMaterialP2_Capa3" type="number" class="form-control form-control-sm" id="floatingInput" required readonly onmousedown="return false;">
                        <label for="floatingInput">%</label>
                      </div>
                    </ng-template>
                  </div>
                </div>

                <!--Fila 7 readonly onmousedown="return false;"-->
                <div class="mb-3" >
                  <div class="row g-3 justify-content-md-center">

                    <!--Material 3 Capa 1 -->
                    <div class="form-floating col-md-2" *ngIf="checkedCapa1 || checkedCapa2 || checkedCapa3; else m3c1">
                      <select formControlName="materialP3_Capa1" id="floatingSelect" type="text" class="form-select form-select-sm" aria-label=".form-select-sm example" required>
                        <option [ngValue]="mezMat.mezMaterial_Id" *ngFor="let mezMat of mezclasMateriales2">{{mezMat.mezMaterial_Nombre}}</option>
                      </select>
                      <label for="floatingSelect">Material 3</label>
                    </div>
                    <ng-template #m3c1>
                      <div class="form-floating col-md-2">
                        <select formControlName="materialP3_Capa1" id="floatingSelect" type="text" class="form-select form-select-sm" aria-label=".form-select-sm example" required readonly onmousedown="return false;">
                          <option [ngValue]="mezMat.mezMaterial_Id" *ngFor="let mezMat of mezclasMateriales2">{{mezMat.mezMaterial_Nombre}}</option>
                        </select>
                        <label for="floatingSelect">Material 3</label>
                      </div>
                    </ng-template>

                    <!--% Material 3 Capa 1-->
                    <div class="form-floating col-md-1" *ngIf="checkedCapa1 || checkedCapa2 || checkedCapa3; else pm3c1">
                      <input formControlName="PorcentajeMaterialP3_Capa1" type="number" class="form-control form-control-sm" id="floatingInput" required>
                      <label for="floatingInput">%</label>
                    </div>
                    <ng-template #pm3c1>
                      <div class="form-floating col-md-1">
                        <input formControlName="PorcentajeMaterialP3_Capa1" type="number" class="form-control form-control-sm" id="floatingInput" required readonly onmousedown="return false;">
                        <label for="floatingInput">%</label>
                      </div>
                    </ng-template>

                     <!--Material 3 Capa 2-->
                     <div class="form-floating col-md-2" *ngIf="checkedCapa2 || checkedCapa3 else m3c2">
                      <select formControlName="materialP3_Capa2" id="floatingSelect" type="text" class="form-select form-select-sm" aria-label=".form-select-sm example" required>
                        <option [ngValue]="mezMat.mezMaterial_Id" *ngFor="let mezMat of mezclasMateriales2">{{mezMat.mezMaterial_Nombre}}</option>
                      </select>
                      <label for="floatingSelect">Material 3</label>
                    </div>
                    <ng-template #m3c2>
                      <div class="form-floating col-md-2">
                        <select formControlName="materialP3_Capa2" id="floatingSelect" type="text" class="form-select form-select-sm" aria-label=".form-select-sm example" required readonly onmousedown="return false;">
                          <option [ngValue]="mezMat.mezMaterial_Id" *ngFor="let mezMat of mezclasMateriales2">{{mezMat.mezMaterial_Nombre}}</option>
                        </select>
                        <label for="floatingSelect">Material 3</label>
                      </div>
                    </ng-template>

                    <!--% Material 3 Capa 2-->
                    <div class="form-floating col-md-1"  *ngIf="checkedCapa2 || checkedCapa3 else pm3c2">
                      <input formControlName="PorcentajeMaterialP3_Capa2" type="number" class="form-control form-control-sm" id="floatingInput" required>
                      <label for="floatingInput">%</label>
                    </div>
                    <ng-template #pm3c2>
                      <div class="form-floating col-md-1">
                        <input formControlName="PorcentajeMaterialP3_Capa2" type="number" class="form-control form-control-sm" id="floatingInput" required readonly onmousedown="return false;">
                        <label for="floatingInput">%</label>
                      </div>
                    </ng-template>

                     <!--Material 3 Capa 3-->
                     <div class="form-floating col-md-2" *ngIf="checkedCapa3 else m3c3">
                      <select formControlName="materialP3_Capa3" id="floatingSelect" type="text" class="form-select form-select-sm" aria-label=".form-select-sm example" required>
                        <option [ngValue]="mezMat.mezMaterial_Id" *ngFor="let mezMat of mezclasMateriales2">{{mezMat.mezMaterial_Nombre}}</option>
                      </select>
                      <label for="floatingSelect">Material 3</label>
                    </div>
                    <ng-template #m3c3>
                      <div class="form-floating col-md-2">
                        <select formControlName="materialP3_Capa3" id="floatingSelect" type="text" class="form-select form-select-sm" aria-label=".form-select-sm example" required readonly onmousedown="return false;">
                          <option [ngValue]="mezMat.mezMaterial_Id" *ngFor="let mezMat of mezclasMateriales2">{{mezMat.mezMaterial_Nombre}}</option>
                        </select>
                        <label for="floatingSelect">Material 3</label>
                      </div>
                    </ng-template>

                    <!--% Material 3 Capa 1-->
                    <div class="form-floating col-md-1" *ngIf="checkedCapa3 else pm3c3">
                      <input formControlName="PorcentajeMaterialP3_Capa3" type="number" class="form-control form-control-sm" id="floatingInput" required>
                      <label for="floatingInput">%</label>
                    </div>
                    <ng-template #pm3c3>
                      <div class="form-floating col-md-1">
                        <input formControlName="PorcentajeMaterialP3_Capa3" type="number" class="form-control form-control-sm" id="floatingInput" required readonly onmousedown="return false;">
                        <label for="floatingInput">%</label>
                      </div>
                    </ng-template>

                  </div>
                </div>

                <!--Fila 8-->
                <div class="mb-3" >
                  <div class="row g-3 justify-content-md-center">

                    <!-- Material 4 Capa 1-->
                    <div class="form-floating col-md-2"  *ngIf="checkedCapa1 || checkedCapa2 || checkedCapa3; else m4c1">
                      <select formControlName="materialP4_Capa1" id="floatingSelect" type="text" class="form-select form-select-sm" aria-label=".form-select-sm example" required>
                        <option [ngValue]="mezMat.mezMaterial_Id" *ngFor="let mezMat of mezclasMateriales2">{{mezMat.mezMaterial_Nombre}}</option>
                      </select>
                      <label for="floatingSelect">Material 4</label>
                    </div>
                    <ng-template #m4c1>
                      <div class="form-floating col-md-2">
                        <select formControlName="materialP4_Capa1" id="floatingSelect" type="text" class="form-select form-select-sm" aria-label=".form-select-sm example" required readonly onmousedown="return false;">
                          <option [ngValue]="mezMat.mezMaterial_Id" *ngFor="let mezMat of mezclasMateriales2">{{mezMat.mezMaterial_Nombre}}</option>
                        </select>
                        <label for="floatingSelect">Material 4</label>
                      </div>
                    </ng-template>

                    <!--% Material 4 Capa 1-->
                    <div class="form-floating col-md-1"  *ngIf="checkedCapa1 || checkedCapa2 || checkedCapa3; else pm4c1">
                      <input formControlName="PorcentajeMaterialP4_Capa1" type="number" class="form-control form-control-sm" id="floatingInput" required>
                      <label for="floatingInput">%</label>
                    </div>
                    <ng-template #pm4c1>
                      <div class="form-floating col-md-1">
                        <input formControlName="PorcentajeMaterialP4_Capa1" type="number" class="form-control form-control-sm" id="floatingInput" required readonly onmousedown="return false;">
                        <label for="floatingInput">%</label>
                      </div>
                    </ng-template>

                     <!--Material 4 Capa 2-->
                     <div class="form-floating col-md-2" *ngIf="checkedCapa2 || checkedCapa3 else m4c2">
                      <select formControlName="materialP4_Capa2" id="floatingSelect" type="text" class="form-select form-select-sm" aria-label=".form-select-sm example" required>
                        <option [ngValue]="mezMat.mezMaterial_Id" *ngFor="let mezMat of mezclasMateriales2">{{mezMat.mezMaterial_Nombre}}</option>
                      </select>
                      <label for="floatingSelect">Material 4</label>
                    </div>
                    <ng-template #m4c2>
                      <div class="form-floating col-md-2">
                        <select formControlName="materialP4_Capa2" id="floatingSelect" type="text" class="form-select form-select-sm" aria-label=".form-select-sm example" required readonly onmousedown="return false;">
                          <option [ngValue]="mezMat.mezMaterial_Id" *ngFor="let mezMat of mezclasMateriales2">{{mezMat.mezMaterial_Nombre}}</option>
                        </select>
                        <label for="floatingSelect">Material 4</label>
                      </div>
                    </ng-template>

                    <!--% Material 4 Capa 2-->
                    <div class="form-floating col-md-1" *ngIf="checkedCapa2 || checkedCapa3 else pm4c2">
                      <input formControlName="PorcentajeMaterialP4_Capa2" type="number" class="form-control form-control-sm" id="floatingInput" required>
                      <label for="floatingInput">%</label>
                    </div>
                    <ng-template #pm4c2>
                      <div class="form-floating col-md-1">
                        <input formControlName="PorcentajeMaterialP4_Capa2" type="number" class="form-control form-control-sm" id="floatingInput" required readonly onmousedown="return false;">
                        <label for="floatingInput">%</label>
                      </div>
                    </ng-template>

                     <!--Material 4 Capa 3-->
                     <div class="form-floating col-md-2" *ngIf="checkedCapa3 else m4c3">
                      <select formControlName="materialP4_Capa3" id="floatingSelect" type="text" class="form-select form-select-sm" aria-label=".form-select-sm example" required>
                        <option [ngValue]="mezMat.mezMaterial_Id" *ngFor="let mezMat of mezclasMateriales2">{{mezMat.mezMaterial_Nombre}}</option>
                      </select>
                      <label for="floatingSelect">Material 4</label>
                    </div>
                    <ng-template #m4c3>
                      <div class="form-floating col-md-2">
                        <select formControlName="materialP4_Capa3" id="floatingSelect" type="text" class="form-select form-select-sm" aria-label=".form-select-sm example" required readonly onmousedown="return false;">
                          <option [ngValue]="mezMat.mezMaterial_Id" *ngFor="let mezMat of mezclasMateriales2">{{mezMat.mezMaterial_Nombre}}</option>
                        </select>
                        <label for="floatingSelect">Material 4</label>
                      </div>
                    </ng-template>

                    <!--% Material 4 Capa 3-->
                    <div class="form-floating col-md-1" *ngIf="checkedCapa3 else pm4c3">
                      <input formControlName="PorcentajeMaterialP4_Capa3" type="number" class="form-control form-control-sm" id="floatingInput" required>
                      <label for="floatingInput">%</label>
                    </div>
                    <ng-template #pm4c3>
                      <div class="form-floating col-md-1">
                        <input formControlName="PorcentajeMaterialP4_Capa3" type="number" class="form-control form-control-sm" id="floatingInput" required readonly onmousedown="return false;">
                        <label for="floatingInput">%</label>
                      </div>
                    </ng-template>

                  </div>
                </div>

                <!--Fila 9-->
                <div class="mb-3" >
                  <div class="row g-3 justify-content-md-center">

                    <!--Pigmento 1 Capa 1-->
                    <div class="form-floating col-md-2" *ngIf="checkedCapa1 || checkedCapa2 || checkedCapa3; else p1c1">
                      <select formControlName="MezclaPigmentoP1_Capa1" id="floatingSelect" type="text" class="form-select form-select-sm" aria-label=".form-select-sm example" required>
                        <option [ngValue]="mezPigt.mezPigmto_Id" *ngFor="let mezPigt of mezclasPigmentos2">{{mezPigt.mezPigmto_Nombre}}</option>
                      </select>
                      <label for="floatingSelect">Pigmento 1</label>
                    </div>
                    <ng-template #p1c1>
                      <div class="form-floating col-md-2" >
                        <select formControlName="MezclaPigmentoP1_Capa1" id="floatingSelect" type="text" class="form-select form-select-sm" aria-label=".form-select-sm example" required readonly onmousedown="return false;">
                          <option [ngValue]="mezPigt.mezPigmto_Id" *ngFor="let mezPigt of mezclasPigmentos2">{{mezPigt.mezPigmto_Nombre}}</option>
                        </select>
                        <label for="floatingSelect">Pigmento 1</label>
                      </div>
                    </ng-template>

                    <!--% Pigmento 1 Capa 1-->
                    <div class="form-floating col-md-1"  *ngIf="checkedCapa1 || checkedCapa2 || checkedCapa3; else pp1c1">
                      <input formControlName="PorcentajeMezclaPigmentoP1_Capa1" type="number" class="form-control form-control-sm" id="floatingInput" required>
                      <label for="floatingInput">%</label>
                    </div>
                    <ng-template #pp1c1>
                      <div class="form-floating col-md-1">
                        <input formControlName="PorcentajeMezclaPigmentoP1_Capa1" type="number" class="form-control form-control-sm" id="floatingInput" required readonly onmousedown="return false;">
                        <label for="floatingInput">%</label>
                      </div>
                    </ng-template>

                     <!-- Pigmento 1 Capa 2-->
                     <div class="form-floating col-md-2" *ngIf="checkedCapa2 || checkedCapa3 else p1c2">
                      <select formControlName="MezclaPigmentoP1_Capa2" id="floatingSelect" type="text" class="form-select form-select-sm" aria-label=".form-select-sm example" required>
                        <option [ngValue]="mezPigt.mezPigmto_Id" *ngFor="let mezPigt of mezclasPigmentos2">{{mezPigt.mezPigmto_Nombre}}</option>
                      </select>
                      <label for="floatingSelect">Pigmento 1</label>
                    </div>
                    <ng-template #p1c2>
                      <div class="form-floating col-md-2" >
                        <select formControlName="MezclaPigmentoP1_Capa2" id="floatingSelect" type="text" class="form-select form-select-sm" aria-label=".form-select-sm example" required readonly onmousedown="return false;">
                          <option [ngValue]="mezPigt.mezPigmto_Id" *ngFor="let mezPigt of mezclasPigmentos2">{{mezPigt.mezPigmto_Nombre}}</option>
                        </select>
                        <label for="floatingSelect">Pigmento 1</label>
                      </div>
                    </ng-template>

                    <!--% Pigmento 1 Capa 2-->
                    <div class="form-floating col-md-1" *ngIf="checkedCapa2 || checkedCapa3 else pp1c2">
                      <input formControlName="PorcentajeMezclaPigmentoP1_Capa2" type="number" class="form-control form-control-sm" id="floatingInput" required>
                      <label for="floatingInput">%</label>
                    </div>
                    <ng-template #pp1c2>
                      <div class="form-floating col-md-1">
                        <input formControlName="PorcentajeMezclaPigmentoP1_Capa2" type="number" class="form-control form-control-sm" id="floatingInput" required readonly onmousedown="return false;">
                        <label for="floatingInput">%</label>
                      </div>
                    </ng-template>

                     <!-- Pigmento 1 Capa 3 -->
                     <div class="form-floating col-md-2" *ngIf="checkedCapa3 else p1c3">
                      <select formControlName="MezclaPigmento1_Capa3" id="floatingSelect" type="text" class="form-select form-select-sm" aria-label=".form-select-sm example" required>
                        <option [ngValue]="mezPigt.mezPigmto_Id" *ngFor="let mezPigt of mezclasPigmentos2">{{mezPigt.mezPigmto_Nombre}}</option>
                      </select>
                      <label for="floatingSelect">Pigmento 1</label>
                    </div>
                    <ng-template #p1c3>
                      <div class="form-floating col-md-2">
                        <select formControlName="MezclaPigmento1_Capa3" id="floatingSelect" type="text" class="form-select form-select-sm" aria-label=".form-select-sm example" required readonly onmousedown="return false;">
                          <option [ngValue]="mezPigt.mezPigmto_Id" *ngFor="let mezPigt of mezclasPigmentos2">{{mezPigt.mezPigmto_Nombre}}</option>
                        </select>
                        <label for="floatingSelect">Pigmento 1</label>
                      </div>
                    </ng-template>

                    <!--% Pigmento 1 Capa 3-->
                    <div class="form-floating col-md-1" *ngIf="checkedCapa3 else pp1c3">
                      <input formControlName="PorcentajeMezclaPigmentoP1_Capa3" type="number" class="form-control form-control-sm" id="floatingInput" required>
                      <label for="floatingInput">%</label>
                    </div>
                    <ng-template #pp1c3>
                      <div class="form-floating col-md-1">
                        <input formControlName="PorcentajeMezclaPigmentoP1_Capa3" type="number" class="form-control form-control-sm" id="floatingInput" required readonly onmousedown="return false;">
                        <label for="floatingInput">%</label>
                      </div>
                    </ng-template>

                  </div>
                </div>

                <!--Fila 10-->
                <div class="mb-3" >
                  <div class="row g-3 justify-content-md-center">

                    <!--Pigmento 2 Capa 1-->
                    <div class="form-floating col-md-2" *ngIf="checkedCapa1 || checkedCapa2 || checkedCapa3; else p2c1">
                      <select formControlName="MezclaPigmentoP2_Capa1" id="floatingSelect" type="text" class="form-select form-select-sm" aria-label=".form-select-sm example" required>
                        <option [ngValue]="mezPigt.mezPigmto_Id" *ngFor="let mezPigt of mezclasPigmentos2">{{mezPigt.mezPigmto_Nombre}}</option>
                      </select>
                      <label for="floatingSelect">Pigmento 2</label>
                    </div>
                    <ng-template #p2c1>
                      <div class="form-floating col-md-2" >
                        <select formControlName="MezclaPigmentoP2_Capa1" id="floatingSelect" type="text" class="form-select form-select-sm" aria-label=".form-select-sm example" required readonly onmousedown="return false;">
                          <option [ngValue]="mezPigt.mezPigmto_Id" *ngFor="let mezPigt of mezclasPigmentos2">{{mezPigt.mezPigmto_Nombre}}</option>
                        </select>
                        <label for="floatingSelect">Pigmento 2</label>
                      </div>
                    </ng-template>

                    <!--% Pigmento 2 Capa 1-->
                    <div class="form-floating col-md-1" *ngIf="checkedCapa1 || checkedCapa2 || checkedCapa3; else pp2c1">
                      <input formControlName="PorcentajeMezclaPigmentoP2_Capa1" type="number" class="form-control form-control-sm" id="floatingInput" required>
                      <label for="floatingInput">%</label>
                    </div>
                    <ng-template #pp2c1>
                      <div class="form-floating col-md-1">
                        <input formControlName="PorcentajeMezclaPigmentoP2_Capa1" type="number" class="form-control form-control-sm" id="floatingInput" required readonly onmousedown="return false;">
                        <label for="floatingInput">%</label>
                      </div>
                    </ng-template>

                     <!--Pigmento 2 Capa 2-->
                     <div class="form-floating col-md-2" *ngIf="checkedCapa2 || checkedCapa3 else p2c2">
                      <select formControlName="MezclaPigmentoP2_Capa2" id="floatingSelect" type="text" class="form-select form-select-sm" aria-label=".form-select-sm example" required>
                        <option [ngValue]="mezPigt.mezPigmto_Id" *ngFor="let mezPigt of mezclasPigmentos2">{{mezPigt.mezPigmto_Nombre}}</option>
                      </select>
                      <label for="floatingSelect">Pigmento 2</label>
                    </div>
                    <ng-template #p2c2>
                      <div class="form-floating col-md-2">
                        <select formControlName="MezclaPigmentoP2_Capa2" id="floatingSelect" type="text" class="form-select form-select-sm" aria-label=".form-select-sm example" required readonly onmousedown="return false;">
                          <option [ngValue]="mezPigt.mezPigmto_Id" *ngFor="let mezPigt of mezclasPigmentos2">{{mezPigt.mezPigmto_Nombre}}</option>
                        </select>
                        <label for="floatingSelect">Pigmento 2</label>
                      </div>
                    </ng-template>

                    <!--% Pigmento 2 Capa 2-->
                    <div class="form-floating col-md-1" *ngIf="checkedCapa2 || checkedCapa3 else pp2c2">
                      <input formControlName="PorcentajeMezclaPigmentoP2_Capa2" type="number" class="form-control form-control-sm" id="floatingInput" required>
                      <label for="floatingInput">%</label>
                    </div>
                    <ng-template #pp2c2>
                      <div class="form-floating col-md-1">
                        <input formControlName="PorcentajeMezclaPigmentoP2_Capa2" type="number" class="form-control form-control-sm" id="floatingInput" required readonly onmousedown="return false;">
                        <label for="floatingInput">%</label>
                      </div>
                    </ng-template>

                     <!--Pigmento 2 Capa 3-->
                     <div class="form-floating col-md-2" *ngIf="checkedCapa3 else p2c3">
                      <select formControlName="MezclaPigmento2_Capa3" id="floatingSelect" type="text" class="form-select form-select-sm" aria-label=".form-select-sm example" required>
                        <option [ngValue]="mezPigt.mezPigmto_Id" *ngFor="let mezPigt of mezclasPigmentos2">{{mezPigt.mezPigmto_Nombre}}</option>
                      </select>
                      <label for="floatingSelect">Pigmento 2</label>
                    </div>
                    <ng-template #p2c3>
                      <div class="form-floating col-md-2">
                        <select formControlName="MezclaPigmento2_Capa3" id="floatingSelect" type="text" class="form-select form-select-sm" aria-label=".form-select-sm example" required onmousedown="return false;">
                          <option [ngValue]="mezPigt.mezPigmto_Id" *ngFor="let mezPigt of mezclasPigmentos2">{{mezPigt.mezPigmto_Nombre}}</option>
                        </select>
                        <label for="floatingSelect">Pigmento 2</label>
                      </div>
                    </ng-template>

                    <!--% Pigmento 2 Capa 3 -->
                    <div class="form-floating col-md-1" *ngIf="checkedCapa3 else pp2c3">
                      <input formControlName="PorcentajeMezclaPigmentoP2_Capa3" type="number" class="form-control form-control-sm" id="floatingInput" required>
                      <label for="floatingInput">%</label>
                    </div>
                    <ng-template #pp2c3>
                      <div class="form-floating col-md-1">
                        <input formControlName="PorcentajeMezclaPigmentoP2_Capa3" type="number" class="form-control form-control-sm" id="floatingInput" required readonly onmousedown="return false;">
                        <label for="floatingInput">%</label>
                      </div>
                    </ng-template>
                  </div>
                </div>
              </form>

              <div class="d-grid gap-2 d-md-flex justify-content-md-center">
                <button class=" btn btn-danger btn-danger-sm" type="button" (click)="crearMezclaPredefinida()">Crear Mezcla</button>
                <button class="btn btn-secondary btn-outline-secondary-sm" type="button" (click)="initFormCrearMezclas()">Limpiar Campos</button>
              </div>

            </p-dialog>
            <!--Fin modal de mezclas -->


          <form [formGroup]="FormOrdenTrabajoMezclas">

            <!--Fila 1-->
            <div class="mb-3" >
              <div class="row g-3 justify-content-md-center">
                <!-- Material -->
                <!--  <div class="form-floating col-md-2">
                  <select formControlName="Material_Extrusion" id="floatingSelect" type="text" class="form-select form-select-sm" aria-label=".form-select-sm example" required>
                     <option>1</option>
                  </select>
                  <label for="floatingSelect">Material</label>
                </div>

                  !-- Pigmento --
                  <div class="form-floating col-md-2">
                    <select formControlName="Pigmento_Extrusion" id="floatingSelect" type="text" n class="form-select form-select-sm" aria-label=".form-select-sm example" required>
                     <option>1</option>
                    </select>
                    <label for="floatingSelect">Pigmento</label>
                  </div> -->

                <!--Modo Mezcla -->
                <!-- <div class="form-floating col-md-5">
                  <select formControlName="Nombre_Mezclas" id="floatingSelect" type="text" n class="form-select form-select-sm" aria-label=".form-select-sm example" required>
                    <option [ngValue]="mezcla" *ngFor="let mezcla of mezclas">{{mezcla}}</option>
                  </select>
                  <label for="floatingSelect">Modo Mezcla</label>
                </div> -->


                <div class="ng-autocomplete form-floating col-md-3 form-control form-control-sm" style="width: 50%;">
                  <ng-autocomplete
                    class=""
                    [data]="mezclas"
                    (selected)='cargarCombinacionMezclas($event)'
                    (inputChanged)='onChangeSearchMezcla($event)'
                    (inputFocused)='onFocusedNombreMezcla($event)'
                    [searchKeyword]="keywordMezclas"
                    [itemTemplate]="itemTemplate2"
                    [notFoundTemplate]="notFoundTemplate"
                    id="floatingInput"
                    formControlName="Nombre_Mezclas">
                  </ng-autocomplete>
                  <ng-template #itemTemplate2 let-item>
                    <a [innerHTML]="item.mezcla_Nombre"></a>
                  </ng-template>
                  <ng-template #notFoundTemplate let-notFound>
                    <div [innerHTML]="notFound"></div>
                  </ng-template>
                  <label for="floatingInput" *ngIf="validarInputMezclas">Mezclas</label>
                </div>
              </div>
            </div>

            <!--Fila 2 y 3 Checkbox-->
            <div class="mb-4">
              <div style="text-align: center;">

                <div class="mb-3">
                  <h6 class="tituloRojo">N° de capas</h6>
                </div>

                <div class="form-check form-check-inline">
                  <input class="form-check-input" formControlName="Chechbox_Capa1" type="checkbox" id="capa1" [(ngModel)]="checkedCapa1" value="option1">
                  <label class="form-check-label" for="inlineCheckbox1">1</label>
                </div>

                <div class="form-check form-check-inline">
                  <input class="form-check-input" formControlName="Chechbox_Capa2" type="checkbox" id="capa2" [(ngModel)]="checkedCapa2" value="option2">
                  <label class="form-check-label" for="inlineCheckbox2">2</label>
                </div>

                <div class="form-check form-check-inline">
                  <input class="form-check-input" formControlName="Chechbox_Capa3" type="checkbox" id="capa3" [(ngModel)]="checkedCapa3" value="option3">
                  <label class="form-check-label" for="inlineCheckbox3">3</label>
                </div>
              </div>
            </div>

            <div class="mb-3"  style="text-align: center;">
              <h6 class="tituloRojo">Porcentajes de mezcla de capas</h6>
            </div>

            <!--Fila 4-->
            <div class="mb-4" >
              <div class="row g-3 justify-content-md-center">

                <!--Capa 1 unica-->
                <div class="form-floating col-md-2">
                  <input formControlName="Proc_Capa1" type="number" class="form-control form-control-sm" id="floatingInput" required >
                  <label for="floatingInput">% Capa 1</label>
                </div>

                <!--Capa 2 interna-->
               <div class="form-floating col-md-2">
                  <input formControlName="Proc_Capa2" type="number" class="form-control form-control-sm" id="floatingInput" required >
                  <label for="floatingInput">% Capa 2</label>
                </div>

                <!--Capa 3 Externa-->
                <div class="form-floating col-md-2">
                  <input formControlName="Proc_Capa3" type="number" class="form-control form-control-sm" id="floatingInput" required >
                  <label for="floatingInput">% Capa 3</label>
                </div>
              </div>
            </div>

            <div class="mb-3"  style="text-align: center;">
              <h6 class="tituloRojo">Porcentajes de mezcla de materiales</h6>
            </div>

            <!--Fila 5-->
            <div class="mb-3" >
              <div class="row g-3 justify-content-md-center">

                <!--Material 1 Capa 1 -->
                <div class="form-floating col-md-2">
                  <select formControlName="materialP1_Capa1" id="floatingSelect" type="text" class="form-select form-select-sm" aria-label=".form-select-sm example" required>
                    <option [ngValue]="mezMat" *ngFor="let mezMat of mezclasMateriales">{{mezMat}}</option>
                  </select>
                  <label for="floatingSelect">Material 1</label>
                </div>

                <!--% Material 1 Capa 1-->
                <div class="form-floating col-md-1">
                  <input formControlName="PorcentajeMaterialP1_Capa1" type="number" class="form-control form-control-sm" id="floatingInput" required>
                  <label for="floatingInput">%</label>
                </div>

                 <!--Material 1 Capa 2-->
                 <div class="form-floating col-md-2">
                  <select formControlName="materialP1_Capa2" id="floatingSelect" type="text" class="form-select form-select-sm" aria-label=".form-select-sm example" required>
                    <option [ngValue]="mezMat" *ngFor="let mezMat of mezclasMateriales">{{mezMat}}</option>
                  </select>
                  <label for="floatingSelect">Material 1</label>
                </div>

                <!--% Material 1 Capa 2-->
                <div class="form-floating col-md-1">
                  <input formControlName="PorcentajeMaterialP1_Capa2" type="number" class="form-control form-control-sm" id="floatingInput" required>
                  <label for="floatingInput">%</label>
                </div>

                 <!--Material 1 Capa 3-->
                 <div class="form-floating col-md-2">
                  <select formControlName="materialP1_Capa3" id="floatingSelect" type="text" class="form-select form-select-sm" aria-label=".form-select-sm example" required>
                    <option [ngValue]="mezMat" *ngFor="let mezMat of mezclasMateriales">{{mezMat}}</option>
                  </select>
                  <label for="floatingSelect">Material 1</label>
                </div>

                <!--% Material 1 Capa 3-->
                <div class="form-floating col-md-1">
                  <input formControlName="PorcentajeMaterialP1_Capa3" type="number" class="form-control form-control-sm" id="floatingInput" required>
                  <label for="floatingInput">%</label>
                </div>

              </div>
            </div>

            <!--Fila 6-->
            <div class="mb-3" >
              <div class="row g-3 justify-content-md-center">

                <!--Material 2 Capa 1-->
                <div class="form-floating col-md-2">
                  <select formControlName="materialP2_Capa1" id="floatingSelect" type="text" class="form-select form-select-sm" aria-label=".form-select-sm example" required>
                    <option [ngValue]="mezMat" *ngFor="let mezMat of mezclasMateriales">{{mezMat}}</option>
                  </select>
                  <label for="floatingSelect">Material 2</label>
                </div>

                <!--% Material 2 Capa 1  -->
                <div class="form-floating col-md-1">
                  <input formControlName="PorcentajeMaterialP2_Capa1" type="number" class="form-control form-control-sm" id="floatingInput" required>
                  <label for="floatingInput">%</label>
                </div>

                  <!--Material 2 Capa 2-->
                <div class="form-floating col-md-2">
                  <select formControlName="materialP2_Capa2" id="floatingSelect" type="text" class="form-select form-select-sm" aria-label=".form-select-sm example" required>
                    <option [ngValue]="mezMat" *ngFor="let mezMat of mezclasMateriales">{{mezMat}}</option>
                  </select>
                  <label for="floatingSelect">Material 2</label>
                </div>

                <!--% Material 2 Capa 2-->
                <div class="form-floating col-md-1">
                  <input formControlName="PorcentajeMaterialP2_Capa2" type="number" class="form-control form-control-sm" id="floatingInput" required>
                  <label for="floatingInput">%</label>
                </div>

                  <!--Material 2 Capa 3-->
                <div class="form-floating col-md-2">
                  <select formControlName="materialP2_Capa3" id="floatingSelect" type="text" class="form-select form-select-sm" aria-label=".form-select-sm example" required>
                    <option [ngValue]="mezMat" *ngFor="let mezMat of mezclasMateriales">{{mezMat}}</option>
                  </select>
                  <label for="floatingSelect">Material 2</label>
                </div>

                <!--% Material 2 Capa 3-->
                <div class="form-floating col-md-1">
                  <input formControlName="PorcentajeMaterialP2_Capa3" type="number" class="form-control form-control-sm" id="floatingInput" required>
                  <label for="floatingInput">%</label>
                </div>
              </div>
            </div>

            <!--Fila 7-->
            <div class="mb-3" >
              <div class="row g-3 justify-content-md-center">

                <!--Material 3 Capa 1 -->
                <div class="form-floating col-md-2">
                  <select formControlName="materialP3_Capa1" id="floatingSelect" type="text" class="form-select form-select-sm" aria-label=".form-select-sm example" required>
                    <option [ngValue]="mezMat" *ngFor="let mezMat of mezclasMateriales">{{mezMat}}</option>
                  </select>
                  <label for="floatingSelect">Material 3</label>
                </div>

                <!--% Material 3 Capa 1-->
                <div class="form-floating col-md-1">
                  <input formControlName="PorcentajeMaterialP3_Capa1" type="number" class="form-control form-control-sm" id="floatingInput" required>
                  <label for="floatingInput">%</label>
                </div>

                 <!--Material 3 Capa 2-->
                 <div class="form-floating col-md-2">
                  <select formControlName="materialP3_Capa2" id="floatingSelect" type="text" class="form-select form-select-sm" aria-label=".form-select-sm example" required>
                    <option [ngValue]="mezMat" *ngFor="let mezMat of mezclasMateriales">{{mezMat}}</option>
                  </select>
                  <label for="floatingSelect">Material 3</label>
                </div>

                <!--% Material 3 Capa 2-->
                <div class="form-floating col-md-1">
                  <input formControlName="PorcentajeMaterialP3_Capa2" type="number" class="form-control form-control-sm" id="floatingInput" required>
                  <label for="floatingInput">%</label>
                </div>

                 <!--Material 3 Capa 3-->
                 <div class="form-floating col-md-2">
                  <select formControlName="materialP3_Capa3" id="floatingSelect" type="text" class="form-select form-select-sm" aria-label=".form-select-sm example" required>
                    <option [ngValue]="mezMat" *ngFor="let mezMat of mezclasMateriales">{{mezMat}}</option>
                  </select>
                  <label for="floatingSelect">Material 3</label>
                </div>

                <!--% Material 3 Capa 1-->
                <div class="form-floating col-md-1">
                  <input formControlName="PorcentajeMaterialP3_Capa3" type="number" class="form-control form-control-sm" id="floatingInput" required>
                  <label for="floatingInput">%</label>
                </div>
              </div>
            </div>

            <!--Fila 8-->
            <div class="mb-3" >
              <div class="row g-3 justify-content-md-center">

                <!-- Material 4 Capa 1-->
                <div class="form-floating col-md-2">
                  <select formControlName="materialP4_Capa1" id="floatingSelect" type="text" class="form-select form-select-sm" aria-label=".form-select-sm example" required>
                    <option [ngValue]="mezMat" *ngFor="let mezMat of mezclasMateriales">{{mezMat}}</option>
                  </select>
                  <label for="floatingSelect">Material 4</label>
                </div>

                <!--% Material 4 Capa 1-->
                <div class="form-floating col-md-1">
                  <input formControlName="PorcentajeMaterialP4_Capa1" type="number" class="form-control form-control-sm" id="floatingInput" required>
                  <label for="floatingInput">%</label>
                </div>

                 <!--Material 4 Capa 2-->
                 <div class="form-floating col-md-2">
                  <select formControlName="materialP4_Capa2" id="floatingSelect" type="text" class="form-select form-select-sm" aria-label=".form-select-sm example" required>
                    <option [ngValue]="mezMat" *ngFor="let mezMat of mezclasMateriales">{{mezMat}}</option>
                  </select>
                  <label for="floatingSelect">Material 4</label>
                </div>

                <!--% Material 4 Capa 2-->
                <div class="form-floating col-md-1">
                  <input formControlName="PorcentajeMaterialP4_Capa2" type="number" class="form-control form-control-sm" id="floatingInput" required>
                  <label for="floatingInput">%</label>
                </div>

                 <!--Material 4 Capa 3-->
                 <div class="form-floating col-md-2">
                  <select formControlName="materialP_Capa3" id="floatingSelect" type="text" class="form-select form-select-sm" aria-label=".form-select-sm example" required>
                    <option [ngValue]="mezMat" *ngFor="let mezMat of mezclasMateriales">{{mezMat}}</option>
                  </select>
                  <label for="floatingSelect">Material 4</label>
                </div>

                <!--% Material 4 Capa 3-->
                <div class="form-floating col-md-1">
                  <input formControlName="PorcentajeMaterialP_Capa3" type="number" class="form-control form-control-sm" id="floatingInput" required>
                  <label for="floatingInput">%</label>
                </div>

              </div>
            </div>

            <!--Fila 9-->
            <div class="mb-3" >
              <div class="row g-3 justify-content-md-center">

                <!--Pigmento 1 Capa 1-->
                <div class="form-floating col-md-2">
                  <select formControlName="MezclaPigmentoP1_Capa1" id="floatingSelect" type="text" class="form-select form-select-sm" aria-label=".form-select-sm example" required>
                    <option [ngValue]="mezPigt" *ngFor="let mezPigt of mezclasPigmentos">{{mezPigt}}</option>
                  </select>
                  <label for="floatingSelect">Pigmento 1</label>
                </div>

                <!--% Pigmento 1 Capa 1-->
                <div class="form-floating col-md-1">
                  <input formControlName="PorcentajeMezclaPigmentoP1_Capa1" type="number" class="form-control form-control-sm" id="floatingInput" required>
                  <label for="floatingInput">%</label>
                </div>

                 <!-- Pigmento 1 Capa 2-->
                 <div class="form-floating col-md-2">
                  <select formControlName="MezclaPigmentoP1_Capa2" id="floatingSelect" type="text" class="form-select form-select-sm" aria-label=".form-select-sm example" required>
                    <option [ngValue]="mezPigt" *ngFor="let mezPigt of mezclasPigmentos">{{mezPigt}}</option>
                  </select>
                  <label for="floatingSelect">Pigmento 1</label>
                </div>

                <!--% Pigmento 1 Capa 2-->
                <div class="form-floating col-md-1">
                  <input formControlName="PorcentajeMezclaPigmentoP1_Capa2" type="number" class="form-control form-control-sm" id="floatingInput" required>
                  <label for="floatingInput">%</label>
                </div>

                 <!-- Pigmento 1 Capa 3 -->
                 <div class="form-floating col-md-2">
                  <select formControlName="MezclaPigmento1_Capa3" id="floatingSelect" type="text" class="form-select form-select-sm" aria-label=".form-select-sm example" required>
                    <option [ngValue]="mezPigt" *ngFor="let mezPigt of mezclasPigmentos">{{mezPigt}}</option>
                  </select>
                  <label for="floatingSelect">Pigmento 1</label>
                </div>

                <!--% Pigmento 1 Capa 3-->
                <div class="form-floating col-md-1">
                  <input formControlName="PorcentajeMezclaPigmentoP1_Capa3" type="number" class="form-control form-control-sm" id="floatingInput" required>
                  <label for="floatingInput">%</label>
                </div>

              </div>
            </div>

            <!--Fila 10-->
            <div class="mb-3" >
              <div class="row g-3 justify-content-md-center">

                <!--Pigmento 2 Capa 1-->
                <div class="form-floating col-md-2">
                  <select formControlName="MezclaPigmentoP2_Capa1" id="floatingSelect" type="text" class="form-select form-select-sm" aria-label=".form-select-sm example" required>
                    <option [ngValue]="mezPigt" *ngFor="let mezPigt of mezclasPigmentos">{{mezPigt}}</option>
                  </select>
                  <label for="floatingSelect">Pigmento 2</label>
                </div>

                <!--% Pigmento 2 Capa 1-->
                <div class="form-floating col-md-1">
                  <input formControlName="PorcentajeMezclaPigmentoP2_Capa1" type="number" class="form-control form-control-sm" id="floatingInput" required>
                  <label for="floatingInput">%</label>
                </div>

                 <!--Pigmento 2 Capa 2-->
                 <div class="form-floating col-md-2">
                  <select formControlName="MezclaPigmentoP2_Capa2" id="floatingSelect" type="text" class="form-select form-select-sm" aria-label=".form-select-sm example" required>
                    <option [ngValue]="mezPigt" *ngFor="let mezPigt of mezclasPigmentos">{{mezPigt}}</option>
                  </select>
                  <label for="floatingSelect">Pigmento 2</label>
                </div>

                <!--% Pigmento 2 Capa 2-->
                <div class="form-floating col-md-1">
                  <input formControlName="PorcentajeMezclaPigmentoP2_Capa2" type="number" class="form-control form-control-sm" id="floatingInput" required>
                  <label for="floatingInput">%</label>
                </div>

                 <!--Pigmento 2 Capa 3-->
                 <div class="form-floating col-md-2">
                  <select formControlName="MezclaPigmento2_Capa3" id="floatingSelect" type="text" class="form-select form-select-sm" aria-label=".form-select-sm example" required>
                    <option [ngValue]="mezPigt" *ngFor="let mezPigt of mezclasPigmentos">{{mezPigt}}</option>
                  </select>
                  <label for="floatingSelect">Pigmento 2</label>
                </div>

                <!--% Pigmento 2 Capa 3 -->
                <div class="form-floating col-md-1">
                  <input formControlName="PorcentajeMezclaPigmentoP2_Capa3" type="number" class="form-control form-control-sm" id="floatingInput" required>
                  <label for="floatingInput">%</label>
                </div>
              </div>
            </div>
          </form>
        </div>
      </div>

      <!-- Inicio Botones -->
      <div class="bajarPagina">
        <div class="d-grid gap-2 d-md-flex justify-content-md-center">
          <button class=" btn btn-danger btn-danger-sm" type="button" (click)="guardarOT()">Crear Orden de Trabajo</button>
          <button class="btn btn-secondary btn-outline-secondary-sm" type="button" (click)="limpiarCampos()">Limpiar Campos</button>
          <button class=" btn btn-danger btn-danger-sm" type="button" (click)="consultarOTCreada()">Consultar Orden de Trabajo</button>
        </div>
      </div>
    </div>
  </div>
</div>
